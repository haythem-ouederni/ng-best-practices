<div class="alert alert-primary" role="alert">
  {{ 'cnx.page_one.title' |Â translate: {display: 'Tests'} }}
</div>

<!-- Block to display when the form is successfully submitted -->
<div *ngIf="isFormSubmittedSuccessfully" class="alert alert-success">
  {{'cnx.page_one.messages.submission_success' | translate}}
</div>
<form 
  [formGroup]="form"
  #connectionForm="ngForm"
  (ngSubmit)="onSubmit()">

  <!-- username container-->
  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span 
        class="input-group-text"
        id="basic-addon1">@</span>
    </div>
    <input 
      type="text" 
      id="username"
      formControlName="username" 
      (input)="onChangeUsername()"
      class="form-control" 
      placeholder="{{'cnx.page_one.form.username' | translate}}" 
      aria-label="Username" 
      aria-describedby="basic-addon1">
  </div>
  <!-- username related errors: using direct validation -->
  <div 
    class="alert alert-danger"
    role="alert" 
    *ngIf="validationErrorMessages && username.invalid && (username.touched || connectionForm.submitted)">
    <span *ngFor="let error of (username.errors | keysAndValuesFromObject | slice:0:1)">
      {{validationErrorMessages['username'][error.key]}}
    </span>
  </div>

  <!-- password container-->
  <div class="input-group mb-3">
    <input 
      type="password" 
      id="password"
      formControlName="password" 
      (input)="onChangePassword()"
      class="form-control" 
      placeholder="{{'cnx.page_one.form.password' | translate}}" 
      aria-label="Password" 
      aria-describedby="basic-addon1"
      >
  </div>
  <!-- password related errors: using formErrors -->
  <div
    *ngIf="formErrors?.password && (password.touched || connectionForm.submitted)"
    class="alert alert-danger" 
    role="alert">
    <span>
      {{formErrors?.password}}
    </span>
  </div>

  <!-- age container-->
  <div class="input-group mb-3">
    <input 
      type="text" 
      id="age"
      formControlName="age" 
      (input)="onChangeAge()"
      class="form-control" 
      placeholder="{{'cnx.page_one.form.age' | translate}}" 
      aria-label="Age" 
      aria-describedby="basic-addon1">
  </div>
  <!-- Age related errors: using formErrors -->
  <div
    *ngIf="formErrors?.age && (age.touched || connectionForm.submitted)"
    class="alert alert-danger" 
    role="alert">
    <span>
      {{formErrors?.age}}
    </span>
  </div>
  
  <button type="submit" class="btn btn-primary" id="submit">
    {{'common.buttons.submit' | translate}}
  </button>
</form>

<p>{{'cnx.page_one.messages.information_text' | translate}}</p>

<div>
  <button (click)="goToPageTwo()" class="btn btn-success" type="button">
    {{'cnx.page_one.buttons.go_to_page_2' | translate}}
  </button>
</div>